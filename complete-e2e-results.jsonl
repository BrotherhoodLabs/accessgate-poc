{"timestamp": "2025-09-23T18:03:08.641861Z", "component": "k8s_deployer", "event_type": "deployment_start", "message": "D\u00e9marrage d\u00e9ploiement complet", "level": "INFO"}
{"timestamp": "2025-09-23T18:03:08.642404Z", "component": "k8s_deployer", "event_type": "namespace_create", "message": "Cr\u00e9ation namespace", "level": "INFO"}
{"timestamp": "2025-09-23T18:03:09.174001Z", "component": "k8s_deployer", "event_type": "namespace_created", "message": "Namespace cr\u00e9\u00e9", "level": "INFO"}
{"timestamp": "2025-09-23T18:03:09.174346Z", "component": "k8s_deployer", "event_type": "postgres_deploy", "message": "D\u00e9ploiement PostgreSQL", "level": "INFO"}
{"timestamp": "2025-09-23T18:03:09.480305Z", "component": "k8s_deployer", "event_type": "postgres_deployed", "message": "PostgreSQL d\u00e9ploy\u00e9", "level": "INFO"}
{"timestamp": "2025-09-23T18:03:09.480597Z", "component": "k8s_deployer", "event_type": "postgres_wait", "message": "Attente PostgreSQL", "level": "INFO"}
{"timestamp": "2025-09-23T18:03:09.712492Z", "component": "k8s_deployer", "event_type": "postgres_ready", "message": "PostgreSQL pr\u00eat", "level": "INFO"}
{"timestamp": "2025-09-23T18:03:09.713101Z", "component": "k8s_deployer", "event_type": "db_init", "message": "Initialisation base de donn\u00e9es", "level": "INFO"}
{"timestamp": "2025-09-23T18:04:19.906988Z", "component": "k8s_deployer", "event_type": "db_init_error", "message": "Erreur initialisation DB", "level": "INFO", "error": "Command '['kubectl', 'run', 'postgres-init', '--image=postgres:15', '--rm', '-i', '--restart=Never', '-n', 'accessgate-poc', '--', 'psql', '-h', 'postgres-service', '-U', 'accessgate', '-d', 'accessgate_poc', '-c', \"\\n            CREATE TABLE IF NOT EXISTS users (\\n                id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\\n                email VARCHAR(255) UNIQUE NOT NULL,\\n                password VARCHAR(255) NOT NULL,\\n                first_name VARCHAR(100) NOT NULL,\\n                last_name VARCHAR(100) NOT NULL,\\n                is_active BOOLEAN DEFAULT true,\\n                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\\n                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\\n            );\\n            \\n            CREATE TABLE IF NOT EXISTS roles (\\n                id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\\n                name VARCHAR(100) UNIQUE NOT NULL,\\n                description TEXT,\\n                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\\n            );\\n            \\n            CREATE TABLE IF NOT EXISTS permissions (\\n                id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\\n                name VARCHAR(100) UNIQUE NOT NULL,\\n                resource VARCHAR(100) NOT NULL,\\n                description TEXT,\\n                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\\n            );\\n            \\n            CREATE TABLE IF NOT EXISTS user_roles (\\n                id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\\n                user_id UUID REFERENCES users(id) ON DELETE CASCADE,\\n                role_id UUID REFERENCES roles(id) ON DELETE CASCADE,\\n                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\\n                UNIQUE(user_id, role_id)\\n            );\\n            \\n            CREATE TABLE IF NOT EXISTS role_permissions (\\n                id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\\n                role_id UUID REFERENCES roles(id) ON DELETE CASCADE,\\n                permission_id UUID REFERENCES permissions(id) ON DELETE CASCADE,\\n                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\\n                UNIQUE(role_id, permission_id)\\n            );\\n            \\n            -- Ins\u00e9rer des donn\u00e9es de test\\n            INSERT INTO roles (name, description) VALUES \\n                ('Admin', 'Administrateur syst\u00e8me'),\\n                ('Manager', 'Gestionnaire d''\u00e9quipe'),\\n                ('User', 'Utilisateur standard')\\n            ON CONFLICT (name) DO NOTHING;\\n            \\n            INSERT INTO permissions (name, resource, description) VALUES \\n                ('user.read', 'users', 'Lire les utilisateurs'),\\n                ('user.write', 'users', 'Modifier les utilisateurs'),\\n                ('role.read', 'roles', 'Lire les r\u00f4les'),\\n                ('role.write', 'roles', 'Modifier les r\u00f4les'),\\n                ('permission.read', 'permissions', 'Lire les permissions'),\\n                ('permission.write', 'permissions', 'Modifier les permissions')\\n            ON CONFLICT (name) DO NOTHING;\\n            \\n            -- Assigner des permissions aux r\u00f4les\\n            INSERT INTO role_permissions (role_id, permission_id)\\n            SELECT r.id, p.id FROM roles r, permissions p\\n            WHERE r.name = 'Admin'\\n            ON CONFLICT DO NOTHING;\\n            \\n            INSERT INTO role_permissions (role_id, permission_id)\\n            SELECT r.id, p.id FROM roles r, permissions p\\n            WHERE r.name = 'Manager' AND p.name IN ('user.read', 'role.read')\\n            ON CONFLICT DO NOTHING;\\n            \\n            INSERT INTO role_permissions (role_id, permission_id)\\n            SELECT r.id, p.id FROM roles r, permissions p\\n            WHERE r.name = 'User' AND p.name IN ('user.read')\\n            ON CONFLICT DO NOTHING;\\n            \"]' returned non-zero exit status 1."}
{"timestamp": "2025-09-23T18:04:19.907846Z", "component": "k8s_deployer", "event_type": "db_init_skip", "message": "Initialisation DB ignor\u00e9e", "level": "INFO"}
{"timestamp": "2025-09-23T18:04:19.908238Z", "component": "k8s_deployer", "event_type": "backend_deploy", "message": "D\u00e9ploiement Backend", "level": "INFO"}
{"timestamp": "2025-09-23T18:04:20.211114Z", "component": "k8s_deployer", "event_type": "backend_deployed", "message": "Backend d\u00e9ploy\u00e9", "level": "INFO"}
{"timestamp": "2025-09-23T18:04:20.211554Z", "component": "k8s_deployer", "event_type": "frontend_deploy", "message": "D\u00e9ploiement Frontend", "level": "INFO"}
{"timestamp": "2025-09-23T18:04:20.500715Z", "component": "k8s_deployer", "event_type": "frontend_deployed", "message": "Frontend d\u00e9ploy\u00e9", "level": "INFO"}
{"timestamp": "2025-09-23T18:04:20.501051Z", "component": "k8s_deployer", "event_type": "services_deploy", "message": "D\u00e9ploiement Services", "level": "INFO"}
{"timestamp": "2025-09-23T18:04:20.594332Z", "component": "k8s_deployer", "event_type": "services_error", "message": "Erreur d\u00e9ploiement Services", "level": "INFO", "error": "Command '['kubectl', 'apply', '-f', 'k8s/services.yaml', '-n', 'accessgate-poc']' returned non-zero exit status 1."}
{"timestamp": "2025-09-23T18:04:20.594639Z", "component": "k8s_deployer", "event_type": "deployment_error", "message": "Erreur d\u00e9ploiement", "level": "INFO", "error": "Command '['kubectl', 'apply', '-f', 'k8s/services.yaml', '-n', 'accessgate-poc']' returned non-zero exit status 1.", "status": "error"}
{"timestamp": "2025-09-23T18:04:37.316407Z", "component": "k8s_deployer", "event_type": "deployment_start", "message": "D\u00e9marrage d\u00e9ploiement complet", "level": "INFO"}
{"timestamp": "2025-09-23T18:04:37.316708Z", "component": "k8s_deployer", "event_type": "namespace_create", "message": "Cr\u00e9ation namespace", "level": "INFO"}
{"timestamp": "2025-09-23T18:04:37.720552Z", "component": "k8s_deployer", "event_type": "namespace_created", "message": "Namespace cr\u00e9\u00e9", "level": "INFO"}
{"timestamp": "2025-09-23T18:04:37.720884Z", "component": "k8s_deployer", "event_type": "postgres_deploy", "message": "D\u00e9ploiement PostgreSQL", "level": "INFO"}
{"timestamp": "2025-09-23T18:04:38.028577Z", "component": "k8s_deployer", "event_type": "postgres_deployed", "message": "PostgreSQL d\u00e9ploy\u00e9", "level": "INFO"}
{"timestamp": "2025-09-23T18:04:38.028909Z", "component": "k8s_deployer", "event_type": "postgres_wait", "message": "Attente PostgreSQL", "level": "INFO"}
{"timestamp": "2025-09-23T18:04:38.253091Z", "component": "k8s_deployer", "event_type": "postgres_ready", "message": "PostgreSQL pr\u00eat", "level": "INFO"}
{"timestamp": "2025-09-23T18:04:38.253397Z", "component": "k8s_deployer", "event_type": "db_init", "message": "Initialisation base de donn\u00e9es", "level": "INFO"}
{"timestamp": "2025-09-23T18:04:48.385056Z", "component": "k8s_deployer", "event_type": "db_init_error", "message": "Erreur initialisation DB", "level": "INFO", "error": "Command '['kubectl', 'run', 'postgres-init', '--image=postgres:15', '--rm', '-i', '--restart=Never', '-n', 'accessgate-poc', '--', 'psql', '-h', 'postgres-service', '-U', 'accessgate', '-d', 'accessgate_poc', '-c', \"\\n            CREATE TABLE IF NOT EXISTS users (\\n                id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\\n                email VARCHAR(255) UNIQUE NOT NULL,\\n                password VARCHAR(255) NOT NULL,\\n                first_name VARCHAR(100) NOT NULL,\\n                last_name VARCHAR(100) NOT NULL,\\n                is_active BOOLEAN DEFAULT true,\\n                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\\n                updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\\n            );\\n            \\n            CREATE TABLE IF NOT EXISTS roles (\\n                id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\\n                name VARCHAR(100) UNIQUE NOT NULL,\\n                description TEXT,\\n                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\\n            );\\n            \\n            CREATE TABLE IF NOT EXISTS permissions (\\n                id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\\n                name VARCHAR(100) UNIQUE NOT NULL,\\n                resource VARCHAR(100) NOT NULL,\\n                description TEXT,\\n                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP\\n            );\\n            \\n            CREATE TABLE IF NOT EXISTS user_roles (\\n                id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\\n                user_id UUID REFERENCES users(id) ON DELETE CASCADE,\\n                role_id UUID REFERENCES roles(id) ON DELETE CASCADE,\\n                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\\n                UNIQUE(user_id, role_id)\\n            );\\n            \\n            CREATE TABLE IF NOT EXISTS role_permissions (\\n                id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\\n                role_id UUID REFERENCES roles(id) ON DELETE CASCADE,\\n                permission_id UUID REFERENCES permissions(id) ON DELETE CASCADE,\\n                created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\\n                UNIQUE(role_id, permission_id)\\n            );\\n            \\n            -- Ins\u00e9rer des donn\u00e9es de test\\n            INSERT INTO roles (name, description) VALUES \\n                ('Admin', 'Administrateur syst\u00e8me'),\\n                ('Manager', 'Gestionnaire d''\u00e9quipe'),\\n                ('User', 'Utilisateur standard')\\n            ON CONFLICT (name) DO NOTHING;\\n            \\n            INSERT INTO permissions (name, resource, description) VALUES \\n                ('user.read', 'users', 'Lire les utilisateurs'),\\n                ('user.write', 'users', 'Modifier les utilisateurs'),\\n                ('role.read', 'roles', 'Lire les r\u00f4les'),\\n                ('role.write', 'roles', 'Modifier les r\u00f4les'),\\n                ('permission.read', 'permissions', 'Lire les permissions'),\\n                ('permission.write', 'permissions', 'Modifier les permissions')\\n            ON CONFLICT (name) DO NOTHING;\\n            \\n            -- Assigner des permissions aux r\u00f4les\\n            INSERT INTO role_permissions (role_id, permission_id)\\n            SELECT r.id, p.id FROM roles r, permissions p\\n            WHERE r.name = 'Admin'\\n            ON CONFLICT DO NOTHING;\\n            \\n            INSERT INTO role_permissions (role_id, permission_id)\\n            SELECT r.id, p.id FROM roles r, permissions p\\n            WHERE r.name = 'Manager' AND p.name IN ('user.read', 'role.read')\\n            ON CONFLICT DO NOTHING;\\n            \\n            INSERT INTO role_permissions (role_id, permission_id)\\n            SELECT r.id, p.id FROM roles r, permissions p\\n            WHERE r.name = 'User' AND p.name IN ('user.read')\\n            ON CONFLICT DO NOTHING;\\n            \"]' returned non-zero exit status 1."}
{"timestamp": "2025-09-23T18:04:48.385663Z", "component": "k8s_deployer", "event_type": "db_init_skip", "message": "Initialisation DB ignor\u00e9e", "level": "INFO"}
{"timestamp": "2025-09-23T18:04:48.385914Z", "component": "k8s_deployer", "event_type": "backend_deploy", "message": "D\u00e9ploiement Backend", "level": "INFO"}
{"timestamp": "2025-09-23T18:04:48.663801Z", "component": "k8s_deployer", "event_type": "backend_deployed", "message": "Backend d\u00e9ploy\u00e9", "level": "INFO"}
{"timestamp": "2025-09-23T18:04:48.664062Z", "component": "k8s_deployer", "event_type": "frontend_deploy", "message": "D\u00e9ploiement Frontend", "level": "INFO"}
{"timestamp": "2025-09-23T18:04:48.943299Z", "component": "k8s_deployer", "event_type": "frontend_deployed", "message": "Frontend d\u00e9ploy\u00e9", "level": "INFO"}
{"timestamp": "2025-09-23T18:04:48.943595Z", "component": "k8s_deployer", "event_type": "services_deploy", "message": "D\u00e9ploiement Services", "level": "INFO"}
{"timestamp": "2025-09-23T18:04:49.356741Z", "component": "k8s_deployer", "event_type": "services_deployed", "message": "Services d\u00e9ploy\u00e9s", "level": "INFO"}
{"timestamp": "2025-09-23T18:04:49.357088Z", "component": "k8s_deployer", "event_type": "deployment_verify", "message": "V\u00e9rification d\u00e9ploiement", "level": "INFO"}
{"timestamp": "2025-09-23T18:04:50.009837Z", "component": "k8s_deployer", "event_type": "deployment_verified", "message": "D\u00e9ploiement v\u00e9rifi\u00e9", "level": "INFO"}
{"timestamp": "2025-09-23T18:04:50.010130Z", "component": "k8s_deployer", "event_type": "deployment_complete", "message": "D\u00e9ploiement termin\u00e9", "level": "INFO", "success": true, "duration": 12.69342041015625}
{"timestamp": "2025-09-23T18:04:50.010477Z", "component": "e2e_runner", "event_type": "port_forward_setup", "message": "Configuration port forwarding", "level": "INFO"}
{"timestamp": "2025-09-23T18:04:50.016142Z", "component": "e2e_runner", "event_type": "port_forward_backend", "message": "Backend port forwarding d\u00e9marr\u00e9", "level": "INFO"}
{"timestamp": "2025-09-23T18:04:50.024097Z", "component": "e2e_runner", "event_type": "port_forward_frontend", "message": "Frontend port forwarding d\u00e9marr\u00e9", "level": "INFO"}
{"timestamp": "2025-09-23T18:05:00.024651Z", "component": "e2e_runner", "event_type": "tests_start", "message": "D\u00e9marrage tests complets", "level": "INFO"}
{"timestamp": "2025-09-23T18:05:00.049472Z", "component": "e2e_runner", "event_type": "test_result", "message": "Test backend_health: PASS", "level": "INFO", "test_name": "backend_health", "test_status": "PASS", "test_duration": 0.1, "status_code": 200}
{"timestamp": "2025-09-23T18:05:00.050246Z", "component": "e2e_runner", "event_type": "metric", "message": "Metric: backend_uptime", "level": "INFO", "metric_name": "backend_uptime", "metric_value": 157.65255087}
{"timestamp": "2025-09-23T18:05:00.812492Z", "component": "e2e_runner", "event_type": "test_result", "message": "Test user_registration: PASS", "level": "INFO", "test_name": "user_registration", "test_status": "PASS", "test_duration": 0.5, "status_code": 201}
{"timestamp": "2025-09-23T18:05:00.812779Z", "component": "e2e_runner", "event_type": "metric", "message": "Metric: user_registration_success", "level": "INFO", "metric_name": "user_registration_success", "metric_value": 1}
{"timestamp": "2025-09-23T18:05:01.389175Z", "component": "e2e_runner", "event_type": "test_result", "message": "Test user_login: PASS", "level": "INFO", "test_name": "user_login", "test_status": "PASS", "test_duration": 0.3, "status_code": 200}
{"timestamp": "2025-09-23T18:05:01.389603Z", "component": "e2e_runner", "event_type": "metric", "message": "Metric: user_login_success", "level": "INFO", "metric_name": "user_login_success", "metric_value": 1}
{"timestamp": "2025-09-23T18:05:01.404442Z", "component": "e2e_runner", "event_type": "metric", "message": "Metric: frontend_page_valid", "level": "INFO", "metric_name": "frontend_page_valid", "metric_value": 1}
{"timestamp": "2025-09-23T18:05:01.405050Z", "component": "e2e_runner", "event_type": "test_result", "message": "Test frontend_access: PASS", "level": "INFO", "test_name": "frontend_access", "test_status": "PASS", "test_duration": 0.2, "status_code": 200}
{"timestamp": "2025-09-23T18:05:02.597445Z", "component": "e2e_runner", "event_type": "test_result", "message": "Test api_complete: PASS", "level": "INFO", "test_name": "api_complete", "test_status": "PASS", "test_duration": 1.0, "final_status_code": 403}
{"timestamp": "2025-09-23T18:05:02.598232Z", "component": "e2e_runner", "event_type": "tests_complete", "message": "Tests termin\u00e9s", "level": "INFO", "total_tests": 5, "successful_tests": 5, "success_rate": 100.0, "total_duration": 2.5731687545776367}
{"timestamp": "2025-09-23T18:05:02.598635Z", "component": "e2e_runner", "event_type": "metric", "message": "Metric: test_success_rate", "level": "INFO", "metric_name": "test_success_rate", "metric_value": 100.0}
{"timestamp": "2025-09-23T18:05:02.598934Z", "component": "e2e_runner", "event_type": "metric", "message": "Metric: test_total_duration", "level": "INFO", "metric_name": "test_total_duration", "metric_value": 2.5731687545776367}
{"timestamp": "2025-09-23T18:05:02.600340Z", "component": "e2e_runner", "event_type": "port_forward_cleanup", "message": "Nettoyage port forwarding", "level": "INFO"}
{"timestamp": "2025-09-23T18:05:02.600659Z", "component": "e2e_runner", "event_type": "port_forward_cleanup_success", "message": "Processus backend arr\u00eat\u00e9", "level": "INFO"}
{"timestamp": "2025-09-23T18:05:02.600890Z", "component": "e2e_runner", "event_type": "port_forward_cleanup_success", "message": "Processus frontend arr\u00eat\u00e9", "level": "INFO"}
{"timestamp": "2025-09-23T18:08:55.604951Z", "component": "k8s_deployer", "event_type": "deployment_start", "message": "D\u00e9marrage d\u00e9ploiement complet", "level": "INFO"}
{"timestamp": "2025-09-23T18:08:55.605473Z", "component": "k8s_deployer", "event_type": "namespace_create", "message": "Cr\u00e9ation namespace", "level": "INFO"}
{"timestamp": "2025-09-23T18:08:55.999593Z", "component": "k8s_deployer", "event_type": "namespace_created", "message": "Namespace cr\u00e9\u00e9", "level": "INFO"}
{"timestamp": "2025-09-23T18:08:56.000315Z", "component": "k8s_deployer", "event_type": "postgres_deploy", "message": "D\u00e9ploiement PostgreSQL", "level": "INFO"}
{"timestamp": "2025-09-23T18:08:56.283339Z", "component": "k8s_deployer", "event_type": "postgres_deployed", "message": "PostgreSQL d\u00e9ploy\u00e9", "level": "INFO"}
{"timestamp": "2025-09-23T18:08:56.283844Z", "component": "k8s_deployer", "event_type": "postgres_wait", "message": "Attente PostgreSQL", "level": "INFO"}
{"timestamp": "2025-09-23T18:08:56.506420Z", "component": "k8s_deployer", "event_type": "postgres_ready", "message": "PostgreSQL pr\u00eat", "level": "INFO"}
{"timestamp": "2025-09-23T18:08:56.506859Z", "component": "k8s_deployer", "event_type": "db_init", "message": "Initialisation base de donn\u00e9es", "level": "INFO"}
